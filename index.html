<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gerador de CaracterÃ­sticas Fakemon</title>

<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
body{
margin:0;
background:#3b3228;
font-family:'Press Start 2P', cursive;
color:white;
text-align:center;
overflow:hidden;
}

h1{
margin-top:25px;
font-size:14px;
cursor:pointer;
}

.circle{
position:fixed;
width:250px;
height:250px;
border-radius:50%;
opacity:0.2;
z-index:0;
animation:spin 20s linear infinite;
}

.circle1{ top:-80px; left:-80px; }
.circle2{ bottom:-80px; right:-80px; animation-direction:reverse; }

@keyframes spin{
from{transform:rotate(0deg);}
to{transform:rotate(360deg);}
}

.container{
position:relative;
z-index:2;
padding:20px;
max-width:500px;
margin:auto;
display:flex;
flex-direction:column;
gap:15px;
}

.card{
padding:15px;
border-radius:18px;
border:4px solid black;
font-size:11px;
background:#444;
position:relative;
overflow:hidden;
}

.footer{
margin-top:20px;
display:flex;
justify-content:center;
gap:20px;
}

.btn{
padding:15px;
border-radius:15px;
border:4px solid black;
font-family:'Press Start 2P', cursive;
font-size:10px;
cursor:pointer;
background:#444;
color:white;
}

#roletar{ border-color:silver; }
#salvar{ border-color:gold; }

.mega-rainbow{
background:linear-gradient(90deg,red,orange,yellow,green,blue,indigo,violet);
background-size:400%;
animation:rainbow 3s linear infinite;
}

@keyframes rainbow{
0%{background-position:0%}
100%{background-position:100%}
}

.gmax{
background:#8b0000;
}

.gmax::before{
content:"";
position:absolute;
inset:0;
border:4px solid #3a0000;
border-radius:18px;
animation:spin 3s linear infinite;
pointer-events:none;
}

.both{
background:linear-gradient(
to right,
#8b0000 50%,
red,orange,yellow,green,blue,indigo,violet 50%
);
background-size:400%;
animation:rainbow 3s linear infinite;
}

.none{
background:white;
color:black;
border:4px solid gray;
}

.icon{
width:22px;
vertical-align:middle;
margin-left:6px;
}

@media(max-width:500px){
.card{font-size:9px;}
}
</style>
</head>
<body>

<h1 id="titulo">Gerador de CaracterÃ­sticas Fakemon</h1>

<div class="circle circle1" id="circle1"></div>
<div class="circle circle2" id="circle2"></div>

<div class="container" id="card">

<div class="card" id="tipo1">Tipo 1</div>
<div class="card" id="tipo2">Tipo 2</div>
<div class="card" id="evo">EvoluÃ§Ã£o</div>
<div class="card" id="mega">Mega / Gigantamax</div>
<div class="card" id="raridade">Raridade</div>
<div class="card" id="habitat">Habitat</div>

<div class="footer">
<button class="btn" id="roletar">GIRAR</button>
<button class="btn" id="salvar">SALVAR</button>
</div>

</div>

<audio id="roletaAudio" src="https://s31.aconvert.com/convert/p3r68-cdx67/4o2f7-grvzd.mp3"></audio>

<script>

const tipos={
"Normal":["#A8A77A","âšª"],
"Fogo":["#EE8130","ğŸ”¥"],
"Ãgua":["#6390F0","ğŸ’§"],
"Grama":["#7AC74C","ğŸŒ¿"],
"ElÃ©trico":["#F7D02C","âš¡"],
"Gelo":["#96D9D6","â„"],
"Lutador":["#C22E28","ğŸ¥Š"],
"Veneno":["#A33EA1","â˜ "],
"Terra":["#E2BF65","ğŸŒ"],
"Voador":["#A98FF3","ğŸ•Š"],
"PsÃ­quico":["#F95587","ğŸ”®"],
"Inseto":["#A6B91A","ğŸ›"],
"Pedra":["#B6A136","ğŸª¨"],
"Fantasma":["#735797","ğŸ‘»"],
"DragÃ£o":["#6F35FC","ğŸ‰"],
"Sombrio":["#705746","ğŸŒ‘"],
"AÃ§o":["#B7B7CE","âš™ï¸"],
"Fada":["#D685AD","âœ¨"]
};

function raridadePeso(){
let r=Math.random();
if(r<0.6) return "Comum";
if(r<0.85) return "Pseudo-lendÃ¡rio";
if(r<0.97) return "MÃ­tico";
return "LendÃ¡rio";
}

function evolucaoPeso(){
let r=Math.random();
if(r<0.45) return "1";
if(r<0.8) return "2";
if(r<0.95) return "3";
return "4";
}

function pastel(hex){
let r=parseInt(hex.substr(1,2),16);
let g=parseInt(hex.substr(3,2),16);
let b=parseInt(hex.substr(5,2),16);
r=(r+255)/2;
g=(g+255)/2;
b=(b+255)/2;
return `rgb(${r},${g},${b})`;
}

function sortear(arr){
return arr[Math.floor(Math.random()*arr.length)];
}

function gerarResultado(){

let t1=sortear(Object.keys(tipos));
let t2=sortear(Object.keys(tipos));

document.getElementById("tipo1").innerHTML=`${tipos[t1][1]} ${t1}`;
document.getElementById("tipo2").innerHTML=`${tipos[t2][1]} ${t2}`;

document.getElementById("tipo1").style.background=pastel(tipos[t1][0]);
document.getElementById("tipo2").style.background=pastel(tipos[t2][0]);

document.getElementById("circle1").style.background=tipos[t1][0];
document.getElementById("circle2").style.background=tipos[t2][0];

document.getElementById("evo").innerHTML="EvoluÃ§Ã£o: "+evolucaoPeso();
document.getElementById("raridade").innerHTML=raridadePeso();
document.getElementById("habitat").innerHTML=
sortear(["Floresta","Montanha","Caverna","Oceano","Deserto","RuÃ­nas","Campos","Tundra","VulcÃ£o"]);

let megaTipo=sortear(["Mega","Gigantamax","Ambos","Nenhuma"]);
let megaBtn=document.getElementById("mega");
megaBtn.className="card";

if(megaTipo==="Mega"){
megaBtn.classList.add("mega-rainbow");
megaBtn.innerHTML=`Mega 
<img class="icon" src="https://www.pokepedia.fr/images/5/5d/Symbole_M%C3%A9ga-%C3%89volution_LPZA.svg">`;
}
else if(megaTipo==="Gigantamax"){
megaBtn.classList.add("gmax");
megaBtn.innerHTML=`Gigantamax 
<img class="icon" src="https://i.ibb.co/GQWCWWDQ/gmax.png">`;
}
else if(megaTipo==="Ambos"){
megaBtn.classList.add("both");
megaBtn.innerHTML=`Mega / Gigantamax
<img class="icon" src="https://www.pokepedia.fr/images/5/5d/Symbole_M%C3%A9ga-%C3%89volution_LPZA.svg">
<img class="icon" src="https://i.ibb.co/GQWCWWDQ/gmax.png">`;
}
else{
megaBtn.classList.add("none");
megaBtn.innerHTML="Nenhuma";
}

}

function roletar(){

let audio=document.getElementById("roletaAudio");
audio.pause();
audio.currentTime=5;
audio.play();

let loop=setInterval(gerarResultado,100);

setTimeout(()=>{
clearInterval(loop);
audio.pause();
audio.currentTime=0;
},5000);

}

document.getElementById("roletar").onclick=roletar;

/* Easter Egg */
document.getElementById("titulo").onclick=gerarResultado;

document.getElementById("salvar").onclick=function(){
html2canvas(document.getElementById("card")).then(canvas=>{
let link=document.createElement("a");
link.download="pokemon_custom.png";
link.href=canvas.toDataURL();
link.click();
});
};

</script>

</body>
</html>

